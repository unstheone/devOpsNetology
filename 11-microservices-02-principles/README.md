# Домашнее задание к занятию "11.02 Микросервисы: принципы"

---
## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:
- Маршрутизация запросов к нужному сервису на основе конфигурации
- Возможность проверки аутентификационной информации в запросах
- Обеспечение терминации HTTPS

Обоснуйте свой выбор.

### Ответ 1

|    Решение    | Маршрутизация запросов | Аутентификация при запросах | Терминация HTTPS | Платная /<br/>OpenSource |
|:-------------:|:---:|:---:|:---:|:------------------------:|
| Apache APISIX | ✔ | ✔ |        ✔         |        OpenSource        |
|  NGINX Plus   | ✔ | ✔ |        ✔         |         Платная          |
|    APIGee     | ✔ | ✔ |        ✔         |         Платная          |
|     Axway     | ✔ | ✔ |        ✔         |        OpenSource        |
|     Kong      | ✔ | ✔ |        ✔         |        OpenSource         |
|      Tyk      | ✔ | ✔ |        ✔         |        OpenSource         |
|Traefik | ✔ | ✔ |        ✔         | OpenSource |
| Ingress (K8s) | ✔ | ✔ |        ✔         | OpenSource |
|  Gravitee.io  | ✔ | ✔ |        ✔         |        OpenSource         |

Как видно из таблицы выше, все решения соответствуют минимальным требованиям. Для выбора конкретного решения, можно руководствоваться:
- Текущей IT архитектурой компании (допустим если внедрен Kubernetes, возможно удобной опцией станет добавления Ingress Controller;
- Платностью или "бесплатностью" решения - извечный вопрос куда тратить деньги. Можно купить решение с поддержкой и получится некий outsource, или open source с внутренней поддержкой и обслуживанием - расходы на сотрудников внутри компании (обучение, зарплата и т.д.)
- Отзывы и наличие хорошей документации / сильного open source комьюнити.

Прочитав несколько статей, показалось, что большое количество разработчиков выделяют Kong и Traefik;

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- Поддержка кластеризации для обеспечения надежности
- Хранение сообщений на диске в процессе доставки
- Высокая скорость работы
- Поддержка различных форматов сообщений
- Разделение прав доступа к различным потокам сообщений
- Простота эксплуатации

Обоснуйте свой выбор.

### Ответ 2

| Возможности | Apache Kafka | RabbitMQ | Redis | ActiveMQ |          NATS           |
|:---:|:---:|:---:|:---:|:---:|:-----------------------:|
| Поддержка кластеризации для обеспечения надежности | ✔ | ✔ | ✔ | ✔ |            ✔            |
| Хранение сообщений на диске в процессе доставки | ✔ | ✔ | ✔ | ✔ |            ✔            |
| Высокая скорость работы | ✔ | ✔ | ✔ | ✖ |            ✔            |
| Поддержка различных форматов сообщений | BINARY on TCP | STOMP/AMQP/MQTT |  RESP | 10 форматов, включая AMQP, AUTO, MQTT, REST | NATS Streaming protocol |
| Разделение прав доступа к различным потокам сообщений | ✔ | ✔ | ✔ | ✔ |            ✔            |
| Простота эксплуатации | ✖ | ✔ | ✔ | ✔ |            ✔            |

Из приведенных в сравнительной таблице брокеров сообщений оптимальным кажется использовать RabbitMQ. Сочетает высокую скорость работы, прост в эксплуатации, при этом поддерживает различные форматы коммуникации.
Помимо этого, он имеет высокую распространенность, следовательно специалистов с ним работающих должно быть больше.