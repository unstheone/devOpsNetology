## Задача 1

Опишите кратко, в чём основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

```
1) Аппаратная виртуализация - виртуализация прямо "на железе". Гипервизор имеет прямой доступ к аппаратным ресурсам сервера и может передавать ресурсы напрямую гостевым ОС.
2) Паравиртуализация - виртуализация поверх основной операционной системы. Гипервизор обращается к ресурсам хоста через хостовую ОС и отдаёт их гостевым ОС.
3) Виртуализация уровня ОС - виртуальные машины (контейнеры) используют ядро, устройства и ресурсы хостовой ОС, но при этом остаются изолированными друг от друга. За счёт этого, они получаются очень легкими, но не могут отличаться ядром от хостовой ОС.
```

## Задача 2

Выберите один из вариантов использования организации физических серверов в зависимости от условий использования.
Опишите, почему вы выбрали к каждому целевому использованию такую организацию.


| Условия использования                                       | Организация сервера     | Обоснование                                                                                                                                                                                                                   |
|-------------------------------------------------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| высоконагруженная база данных, чувствительная к отказу      | виртуализация уровня ОС | При виртуализации уровня ОС (контейнеризации) проще как наращивать количество инстансов БД при росте нагрузки, а также обеспечить отказоустойчивость, собирая контейнеры в кластер                                            |
| различные web-приложения                                    | виртуализация уровня ОС | Как правило, web-приложения - это ngnix или apache. Как и в примере с БД, легче мастшабируется, резервируется и мигрируется (при такой необходимости) в условиях контейнеризации.                                             |
| Windows-системы для использования бухгалтерским отделом     | паравиртуализация       | На стороне серверных приложений - HyperV в режиме паравиртуализации или аппаратной виртуализации. На стороне пользователей (бухгалтеров) - тонкие клиенты до сервером (нативные клиенты типа 1C или App-over-RDP (RemoteApp)) |
| системы, выполняющие высокопроизводительные расчёты на GPU  | физические сервера      | Отдаём GPU напрямую гостевым ОС, на которых развернуты эти системы                                                                                                                                                            |


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.


1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based-инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
~~~
Если нет особых требований и ресурсных рамок, то можно всё хоть в публичном облаке развернуть. Сегодня 100 VM, завтра 30, послезавтра 230 - оплата будет за real-time ресурс, который нам нужен сегодня.
Если же это должна быть частная инфраструктура, тут подойдёт одно из решений аппаратной виртуализации: VMware, HyperV, KVM - в таком порядке. VMware одинаково хорошо для windows и linux-based OS, имеет самое широкое распространение и хорошую базу знаний. HyperV вторым, т.к. в описании сказано "преимущественно windows-based".
Но при выборе конкретного решения, на мой взгляд, основным фактором будет команда системных архитекторов и инженеров, которым это строить и обслуживать. Где им комфортней и больше опыта - на том и будет базироваться, скорее всего.
Что касается репликаций данных и создания резервных копий - для этой части лучше всего подойдёт отдельный аппаратный СХД, имеющий более высокие надёждность и скорость, чем стандартные серверный RAID-массивы.  
~~~
2. Требуется наиболее производительное бесплатное open source-решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
~~~
KVM или Xen. VMware ESXI, если откинуть open-source (до двух ЦПУ бесплатен)
~~~
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows-инфраструктуры.
~~~
VMware ESXI, (до двух ЦПУ бесплатен)
~~~
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
~~~
Можно VirtualBox + vagrant - быстро создаём и запускаем нужный дистрибутив, возможна автоматизация.
Ещё вариант "любая виртуализация" + нужные дистрибутивы linux в виде ОС + docker-контейнеры - если тестирование будет более сложным, чем просто проверка "работает или нет".
~~~

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.
~~~
Основной недостаток - сложность в обслуживании. Нужны или разные, или высокоуровневые специалисты, оба варианта дорогие. Масшатибруемость гетерогенной среди опять же будет требовать погружения в большее количество деталей, а значит будет происходить дольше и/или дороже. Также, такая среда чаще будеть требовать больше физических серверов, чем единая среда виртуализации, особенно в небольших проектах, где, условно, хватило бы одной мощной железки.
И для минимизации рисков, и при изначальном самостоятельном выборе серверной среды, нужно прежде всего отталкиваться из бизнесс требований (что за проект? какое будет окружение? сколько и как хорошо оно должно работать?), а после их формулирования смотреть на имеющийся ресурс, от этого уже отталкиваться при выборе.
В одних проектах может быть уже или закупленное железо, от которого можно ориентироваться, или вообще существующая серверная среда, в которую нужно "разместиться" максимально удачно.
В других может наоборот не быть ничего из HW/SW, но иметься команда, обладающая определенным набором квалификаций.

~~~
